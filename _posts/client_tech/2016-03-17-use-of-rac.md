---
layout: post
title: IOS响应式编程框架ReactiveCocoa(RAC)使用示例
description: ""
category: 客户端开发
tags: [RAC,iOS]
keywords: RAC,iOS
---


<html>
<head>
  <title>IOS响应式编程框架ReactiveCocoa(RAC)使用示例</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/277494; Windows/6.1.7601 Service Pack 1 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="330"/>
<h1>IOS响应式编程框架ReactiveCocoa(RAC)使用示例</h1>

<div>
<span><div><p style="color: rgb(51, 51, 51); font-family: Arial; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"> ReactiveCocoa是响应式编程(FRP)在IOS中的一个实现框架，它的开源地址为：https://github.com/ReactiveCocoa/ReactiveCocoa# ；在网上看了几篇文章，感觉理论讲了很多，但是代码还是看不太懂，于是自己把它github文档上的一些使用的经典示例实现了一下，项目中有需要时可以直接搬过去用，用的熟练了再读源码也比较容易理解。</p><p style="color: rgb(51, 51, 51); font-family: Arial; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><br/></p><p style="color: rgb(51, 51, 51); font-family: Arial; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">    例1. 监听对象的成员变量变化，当成员变量值被改变时，触发做一些事情。</p><p style="color: rgb(51, 51, 51); font-family: Arial; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">    这种情况其实就是IOS KVO机制使用的场景，使用KVO实现，通常有三个步骤：1，给对象的成员变量添加监听；2，实现监听回调；3，取消监听；而通过RAC可以直接实现，RAC的回调是通过block实现的，类似于过程式编程，上下文也更容易理解一些。</p><p style="color: rgb(51, 51, 51); font-family: Arial; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">    场景：当前类有一个成员变量 NSString *input，当它的值被改变时，发送一个请求。</p></div><div><br/></div><div style="color: rgb(51, 51, 51); font-family: Arial; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); font-size: 14px;"><div>    实现： </div></div><div><span style="font-family: Arial;"><span style="font-size: 14px;"><span style="color: silver;"><span style="font-family: Verdana, Geneva, Arial, Helvetica, sans-serif;"><span style="font-size: 9px;"><br/></span></span></span></span></span></div><div><div style="font-family: Consolas, &apos;Courier New&apos;, Courier, mono, serif; font-size: 12px; overflow: auto; padding-top: 1px; text-align: left; color: rgb(51, 51, 51); font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(231, 229, 220);"><ol start="1" style="padding: 0px; border: none; list-style: decimal; color: rgb(92, 92, 92); background-color: rgb(255, 255, 255);"><li style="padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="padding: 0px; border: none; color: black; background-color: inherit;"><span style="padding: 0px; border: none; color: black; background-color: inherit;">[RACObserve(</span><span style="padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">self</span><span style="padding: 0px; border: none; color: black; background-color: inherit;">, input)  </span></span></li><li style="padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="padding: 0px; border: none; color: black; background-color: inherit;">   <span style="padding: 0px; border: none; color: rgb(221, 0, 0); background-color: inherit;"> subscribeNext</span><span style="padding: 0px; border: none; color: black; background-color: inherit;">:^(NSString* x){  </span></span></li><li style="padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="padding: 0px; border: none; color: black; background-color: inherit;">        request(x);<span style="padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">//发送一个请求</span><span style="padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="padding: 0px; border: none; color: black; background-color: inherit;">   }];  </span></li></ol></div><div><br style="color: rgb(51, 51, 51); font-family: Arial; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"/></div><p style="color: rgb(51, 51, 51); font-family: Arial; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"></p><p style="color: rgb(51, 51, 51); font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-family: Menlo; background-color: rgb(255, 255, 255);">每次input值被修改时，就会调用此block，并且把修改后的值做为参数传进来。</p><p style="color: rgb(51, 51, 51); font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-family: Menlo; background-color: rgb(255, 255, 255);"> </p><p style="color: rgb(51, 51, 51); font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-family: Menlo; background-color: rgb(255, 255, 255);">场景：在上面场景中，当用户输入的值以2开头时，才发请求.</p></div><div><br/></div><div><div style="color: rgb(51, 51, 51); font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-family: Menlo; background-color: rgb(255, 255, 255); font-size: 14px;"><div>实现：</div></div><p style="color: rgb(51, 51, 51); font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-family: Menlo; background-color: rgb(255, 255, 255);"></p></div><div><span style="font-family: Menlo;"><span style="font-size: 14px;"><span style="color: silver;"><span style="font-family: Verdana, Geneva, Arial, Helvetica, sans-serif;"><span style="font-size: 9px;"><br/></span></span></span></span></span></div><div><div style="font-family: Consolas, &apos;Courier New&apos;, Courier, mono, serif; font-size: 12px; overflow: auto; padding-top: 1px; text-align: left; color: rgb(51, 51, 51); font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(231, 229, 220);"><ol start="1" style="padding: 0px; border: none; list-style: decimal; color: rgb(92, 92, 92); background-color: rgb(255, 255, 255);"><li style="padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="padding: 0px; border: none; color: black; background-color: inherit;"><span style="padding: 0px; border: none; color: black; background-color: inherit;">[[RACObserve(</span><span style="padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">self</span><span style="padding: 0px; border: none; color: black; background-color: inherit;">, input)  </span></span></li><li style="padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="padding: 0px; border: none; color: black; background-color: inherit;">    <span style="padding: 0px; border: none; color: rgb(221, 0, 0); background-color: inherit;"> filter</span><span style="padding: 0px; border: none; color: black; background-color: inherit;">:^(NSString* value){  </span></span></li><li style="padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="padding: 0px; border: none; color: black; background-color: inherit;">         <span style="padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="padding: 0px; border: none; color: black; background-color: inherit;"> ([value</span><span style="padding: 0px; border: none; color: rgb(221, 0, 0); background-color: inherit;"> hasPrefix</span><span style="padding: 0px; border: none; color: black; background-color: inherit;">:</span><span style="padding: 0px; border: none; color: blue; background-color: inherit;">@&quot;2&quot;</span><span style="padding: 0px; border: none; color: black; background-color: inherit;">]) {  </span></span></li><li style="padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="padding: 0px; border: none; color: black; background-color: inherit;">             <span style="padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">return</span><span style="padding: 0px; border: none; color: black; background-color: inherit;"> </span><span style="padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">YES</span><span style="padding: 0px; border: none; color: black; background-color: inherit;">;  </span></span></li><li style="padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="padding: 0px; border: none; color: black; background-color: inherit;">         } <span style="padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">else</span><span style="padding: 0px; border: none; color: black; background-color: inherit;"> {  </span></span></li><li style="padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="padding: 0px; border: none; color: black; background-color: inherit;">             <span style="padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">return</span><span style="padding: 0px; border: none; color: black; background-color: inherit;"> </span><span style="padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">NO</span><span style="padding: 0px; border: none; color: black; background-color: inherit;">;  </span></span></li><li style="padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="padding: 0px; border: none; color: black; background-color: inherit;">         }  </span></li><li style="padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="padding: 0px; border: none; color: black; background-color: inherit;">     }]  </span></li><li style="padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="padding: 0px; border: none; color: black; background-color: inherit;">    <span style="padding: 0px; border: none; color: rgb(221, 0, 0); background-color: inherit;"> subscribeNext</span><span style="padding: 0px; border: none; color: black; background-color: inherit;">:^(NSString* x){  </span></span></li><li style="padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="padding: 0px; border: none; color: black; background-color: inherit;">        request(x);<span style="padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">//发送一个请求</span><span style="padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="padding: 0px; border: none; color: black; background-color: inherit;">    }];  </span></li></ol></div><div><span style="color: rgb(51, 51, 51); font-family: Arial; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; float: none; background-color: rgb(255, 255, 255);">场景：上面场景是监听自己的成员变量，如果想监听UITextField输入值变化，框架也做了封装可以代替系统回调</span></div><p style="color: rgb(51, 51, 51); font-family: Arial; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"></p></div><div><br/></div><div style="color: rgb(51, 51, 51); font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-family: Menlo; background-color: rgb(255, 255, 255); font-size: 14px;"><div>实现：</div></div><div><span style="font-family: Menlo;"><span style="font-size: 14px;"><span style="color: silver;"><span style="font-family: Verdana, Geneva, Arial, Helvetica, sans-serif;"><span style="font-size: 9px;"><br/></span></span></span></span></span></div><div><div style="font-family: Consolas, &apos;Courier New&apos;, Courier, mono, serif; font-size: 12px; overflow: auto; padding-top: 1px; text-align: left; color: rgb(51, 51, 51); font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(231, 229, 220);"><ol start="1" style="padding: 0px; border: none; list-style: decimal; color: rgb(92, 92, 92); background-color: rgb(255, 255, 255);"><li style="padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="padding: 0px; border: none; color: black; background-color: inherit;"><span style="padding: 0px; border: none; color: black; background-color: inherit;">[[</span><span style="padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">self</span><span style="padding: 0px; border: none; color: black; background-color: inherit;">.priceInput</span><span style="padding: 0px; border: none; color: black; background-color: inherit;">.rac_textSignal</span><span style="padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="padding: 0px; border: none; color: black; background-color: inherit;">    <span style="padding: 0px; border: none; color: rgb(221, 0, 0); background-color: inherit;"> filter</span><span style="padding: 0px; border: none; color: black; background-color: inherit;">:^(</span><span style="padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">NSString</span><span style="padding: 0px; border: none; color: black; background-color: inherit;"> *str) {  </span></span></li><li style="padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="padding: 0px; border: none; color: black; background-color: inherit;">         <span style="padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="padding: 0px; border: none; color: black; background-color: inherit;"> (str</span><span style="padding: 0px; border: none; color: black; background-color: inherit;">.integerValue</span><span style="padding: 0px; border: none; color: black; background-color: inherit;"> &gt; </span><span style="padding: 0px; border: none; color: black; background-color: inherit;">2</span><span style="padding: 0px; border: none; color: black; background-color: inherit;">0</span><span style="padding: 0px; border: none; color: black; background-color: inherit;">) {  </span></span></li><li style="padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="padding: 0px; border: none; color: black; background-color: inherit;">             <span style="padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">return</span><span style="padding: 0px; border: none; color: black; background-color: inherit;"> </span><span style="padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">YES</span><span style="padding: 0px; border: none; color: black; background-color: inherit;">;  </span></span></li><li style="padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="padding: 0px; border: none; color: black; background-color: inherit;">         } <span style="padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">else</span><span style="padding: 0px; border: none; color: black; background-color: inherit;"> {  </span></span></li><li style="padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="padding: 0px; border: none; color: black; background-color: inherit;">             <span style="padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">return</span><span style="padding: 0px; border: none; color: black; background-color: inherit;"> </span><span style="padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">NO</span><span style="padding: 0px; border: none; color: black; background-color: inherit;">;  </span></span></li><li style="padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="padding: 0px; border: none; color: black; background-color: inherit;">         }  </span></li><li style="padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="padding: 0px; border: none; color: black; background-color: inherit;">     }]  </span></li><li style="padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="padding: 0px; border: none; color: black; background-color: inherit;">    <span style="padding: 0px; border: none; color: rgb(221, 0, 0); background-color: inherit;"> subscribeNext</span><span style="padding: 0px; border: none; color: black; background-color: inherit;">:^(</span><span style="padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">NSString</span><span style="padding: 0px; border: none; color: black; background-color: inherit;"> *str) {  </span></span></li><li style="padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="padding: 0px; border: none; color: black; background-color: inherit;">&lt;span style=<span style="padding: 0px; border: none; color: blue; background-color: inherit;">&quot;white-space:pre&quot;</span><span style="padding: 0px; border: none; color: black; background-color: inherit;">&gt;    &lt;/span&gt;request(x);</span><span style="padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">//发送一个请求</span><span style="padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li></ol></div><span style="color: rgb(51, 51, 51); font-family: Arial; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; float: none; background-color: rgb(255, 255, 255);">}];</span><p style="color: rgb(51, 51, 51); font-family: Arial; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"></p><pre style="white-space: pre-wrap; word-wrap: break-word; color: rgb(51, 51, 51); font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: left; text-indent: 0px; text-transform: none; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"></pre><span style="color: rgb(51, 51, 51); font-family: Arial; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; float: none; background-color: rgb(255, 255, 255);">例2. 同时监听多个变量变化，当这些变量满足一定条件时，使button为可点击状态</span><p style="color: rgb(51, 51, 51); font-family: Arial; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"></p><p style="color: rgb(51, 51, 51); font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-family: Menlo; background-color: rgb(255, 255, 255);">场景：button监听 两个输入框有值和一个成员变量值，当输入框有输入且成员变量为真时，button为可点击状态</p><p style="color: rgb(51, 51, 51); font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-family: Menlo; background-color: rgb(255, 255, 255);">实现：</p></div><div><span style="color: rgb(51, 51, 51);"><span style="font-family: Menlo;"><span style="font-size: 14px;"><br/></span></span></span></div><div><div style="font-family: Consolas, &apos;Courier New&apos;, Courier, mono, serif; font-size: 12px; overflow: auto; padding-top: 1px; text-align: left; color: rgb(51, 51, 51); font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(231, 229, 220);"><ol start="1" style="padding: 0px; border: none; list-style: decimal; color: rgb(92, 92, 92); background-color: rgb(255, 255, 255);"><li style="padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="padding: 0px; border: none; color: black; background-color: inherit;"><span style="padding: 0px; border: none; color: black; background-color: inherit;">RAC(</span><span style="padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">self</span><span style="padding: 0px; border: none; color: black; background-color: inherit;">.payButton</span><span style="padding: 0px; border: none; color: black; background-color: inherit;">,enabled) = [RACSignal  </span></span></li><li style="padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="padding: 0px; border: none; color: black; background-color: inherit;">                                  <span style="padding: 0px; border: none; color: rgb(221, 0, 0); background-color: inherit;"> combineLatest</span><span style="padding: 0px; border: none; color: black; background-color: inherit;">:@[</span><span style="padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">self</span><span style="padding: 0px; border: none; color: black; background-color: inherit;">.priceInput</span><span style="padding: 0px; border: none; color: black; background-color: inherit;">.rac_textSignal</span><span style="padding: 0px; border: none; color: black; background-color: inherit;">,  </span></span></li><li style="padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="padding: 0px; border: none; color: black; background-color: inherit;">                                                <span style="padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">self</span><span style="padding: 0px; border: none; color: black; background-color: inherit;">.nameInput</span><span style="padding: 0px; border: none; color: black; background-color: inherit;">.rac_textSignal</span><span style="padding: 0px; border: none; color: black; background-color: inherit;">,  </span></span></li><li style="padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="padding: 0px; border: none; color: black; background-color: inherit;">                                                RACObserve(<span style="padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">self</span><span style="padding: 0px; border: none; color: black; background-color: inherit;">, isConnected)  </span></span></li><li style="padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="padding: 0px; border: none; color: black; background-color: inherit;">                                                ]  </span></li><li style="padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="padding: 0px; border: none; color: black; background-color: inherit;">                                  <span style="padding: 0px; border: none; color: rgb(221, 0, 0); background-color: inherit;"> reduce</span><span style="padding: 0px; border: none; color: black; background-color: inherit;">:^(</span><span style="padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">NSString</span><span style="padding: 0px; border: none; color: black; background-color: inherit;"> *price, </span><span style="padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">NSString</span><span style="padding: 0px; border: none; color: black; background-color: inherit;"> *name, </span><span style="padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">NSNumber</span><span style="padding: 0px; border: none; color: black; background-color: inherit;"> *connect){  </span></span></li><li style="padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="padding: 0px; border: none; color: black; background-color: inherit;">                                   <span style="padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">return</span><span style="padding: 0px; border: none; color: black; background-color: inherit;"> @(price</span><span style="padding: 0px; border: none; color: black; background-color: inherit;">.length</span><span style="padding: 0px; border: none; color: black; background-color: inherit;"> &gt; </span><span style="padding: 0px; border: none; color: black; background-color: inherit;">0</span><span style="padding: 0px; border: none; color: black; background-color: inherit;"> &amp;&amp; name</span><span style="padding: 0px; border: none; color: black; background-color: inherit;">.length</span><span style="padding: 0px; border: none; color: black; background-color: inherit;"> &gt; </span><span style="padding: 0px; border: none; color: black; background-color: inherit;">0</span><span style="padding: 0px; border: none; color: black; background-color: inherit;"> &amp;&amp; [connect</span><span style="padding: 0px; border: none; color: rgb(221, 0, 0); background-color: inherit;"> boolValue</span><span style="padding: 0px; border: none; color: black; background-color: inherit;">]);  </span></span></li><li style="padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="padding: 0px; border: none; color: black; background-color: inherit;">                                   }];  </span></li></ol></div><div><br style="color: rgb(51, 51, 51); font-family: Arial; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"/></div><p style="color: rgb(51, 51, 51); font-family: Arial; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"></p><p style="color: rgb(51, 51, 51); font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-family: Menlo; background-color: rgb(255, 255, 255);">场景：满足上面条件时，直接发送请求</p></div><div><br/></div><div style="color: rgb(51, 51, 51); font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-family: Menlo; background-color: rgb(255, 255, 255); font-size: 14px;"><div>实现：</div></div><div><span style="font-family: Menlo;"><span style="font-size: 14px;"><span style="color: silver;"><span style="font-family: Verdana, Geneva, Arial, Helvetica, sans-serif;"><span style="font-size: 9px;"><br/></span></span></span></span></span></div><div><div style="font-family: Consolas, &apos;Courier New&apos;, Courier, mono, serif; font-size: 12px; overflow: auto; padding-top: 1px; text-align: left; color: rgb(51, 51, 51); font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(231, 229, 220);"><ol start="1" style="padding: 0px; border: none; list-style: decimal; color: rgb(92, 92, 92); background-color: rgb(255, 255, 255);"><li style="padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="padding: 0px; border: none; color: black; background-color: inherit;"><span style="padding: 0px; border: none; color: black; background-color: inherit;">[[RACSignal  </span></span></li><li style="padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="padding: 0px; border: none; color: black; background-color: inherit;">                                  <span style="padding: 0px; border: none; color: rgb(221, 0, 0); background-color: inherit;"> combineLatest</span><span style="padding: 0px; border: none; color: black; background-color: inherit;">:@[</span><span style="padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">self</span><span style="padding: 0px; border: none; color: black; background-color: inherit;">.priceInput</span><span style="padding: 0px; border: none; color: black; background-color: inherit;">.rac_textSignal</span><span style="padding: 0px; border: none; color: black; background-color: inherit;">,  </span></span></li><li style="padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="padding: 0px; border: none; color: black; background-color: inherit;">                                                <span style="padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">self</span><span style="padding: 0px; border: none; color: black; background-color: inherit;">.nameInput</span><span style="padding: 0px; border: none; color: black; background-color: inherit;">.rac_textSignal</span><span style="padding: 0px; border: none; color: black; background-color: inherit;">,  </span></span></li><li style="padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="padding: 0px; border: none; color: black; background-color: inherit;">                                                RACObserve(<span style="padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">self</span><span style="padding: 0px; border: none; color: black; background-color: inherit;">, isConnected)  </span></span></li><li style="padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="padding: 0px; border: none; color: black; background-color: inherit;">                                                ]  </span></li><li style="padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="padding: 0px; border: none; color: black; background-color: inherit;">                                  <span style="padding: 0px; border: none; color: rgb(221, 0, 0); background-color: inherit;"> reduce</span><span style="padding: 0px; border: none; color: black; background-color: inherit;">:^(</span><span style="padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">NSString</span><span style="padding: 0px; border: none; color: black; background-color: inherit;"> *price, </span><span style="padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">NSString</span><span style="padding: 0px; border: none; color: black; background-color: inherit;"> *name, </span><span style="padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">NSNumber</span><span style="padding: 0px; border: none; color: black; background-color: inherit;"> *connect){  </span></span></li><li style="padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="padding: 0px; border: none; color: black; background-color: inherit;">                                   <span style="padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">return</span><span style="padding: 0px; border: none; color: black; background-color: inherit;"> @(price</span><span style="padding: 0px; border: none; color: black; background-color: inherit;">.length</span><span style="padding: 0px; border: none; color: black; background-color: inherit;"> &gt; </span><span style="padding: 0px; border: none; color: black; background-color: inherit;">0</span><span style="padding: 0px; border: none; color: black; background-color: inherit;"> &amp;&amp; name</span><span style="padding: 0px; border: none; color: black; background-color: inherit;">.length</span><span style="padding: 0px; border: none; color: black; background-color: inherit;"> &gt; </span><span style="padding: 0px; border: none; color: black; background-color: inherit;">0</span><span style="padding: 0px; border: none; color: black; background-color: inherit;"> &amp;&amp; ![connect</span><span style="padding: 0px; border: none; color: rgb(221, 0, 0); background-color: inherit;"> boolValue</span><span style="padding: 0px; border: none; color: black; background-color: inherit;">]);  </span></span></li><li style="padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="padding: 0px; border: none; color: black; background-color: inherit;">                                   }]  </span></li><li style="padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="padding: 0px; border: none; color: black; background-color: inherit;">                            <span style="padding: 0px; border: none; color: rgb(221, 0, 0); background-color: inherit;"> subscribeNext</span><span style="padding: 0px; border: none; color: black; background-color: inherit;">:^(</span><span style="padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">NSNumber</span><span style="padding: 0px; border: none; color: black; background-color: inherit;"> *res){  </span></span></li><li style="padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="padding: 0px; border: none; color: black; background-color: inherit;">                                 <span style="padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="padding: 0px; border: none; color: black; background-color: inherit;"> ([res</span><span style="padding: 0px; border: none; color: rgb(221, 0, 0); background-color: inherit;"> boolValue</span><span style="padding: 0px; border: none; color: black; background-color: inherit;">]) {  </span></span></li><li style="padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="padding: 0px; border: none; color: black; background-color: inherit;">                                     NSLog(<span style="padding: 0px; border: none; color: blue; background-color: inherit;">@&quot;XXXXX send request&quot;</span><span style="padding: 0px; border: none; color: black; background-color: inherit;">);  </span></span></li><li style="padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="padding: 0px; border: none; color: black; background-color: inherit;">                                 }  </span></li><li style="padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="padding: 0px; border: none; color: black; background-color: inherit;">                             }];  </span></li></ol></div><div><br style="color: rgb(51, 51, 51); font-family: Arial; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"/></div><p style="color: rgb(51, 51, 51); font-family: Arial; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">例3. 类似于生成产-消费</p><p style="color: rgb(51, 51, 51); font-family: Arial; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">场景：用户每次在TextField中输入一个字符，1秒内没有其它输入时，去发一个请求。TextField中字符改变触发事件已在例1中展示，这里实现一下它触法的方法，把1秒延时在此方法中实现。</p></div><div><br/></div><div style="color: rgb(51, 51, 51); font-family: Arial; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); font-size: 14px;"><div>实现：</div></div><div><span style="font-family: Menlo;"><span style="font-size: 14px;"><span style="color: silver;"><span style="font-family: Verdana, Geneva, Arial, Helvetica, sans-serif;"><span style="font-size: 9px;"><br/></span></span></span></span></span></div><div style="font-family: Consolas, &apos;Courier New&apos;, Courier, mono, serif; font-size: 12px; overflow: auto; padding-top: 1px; text-align: left; color: rgb(51, 51, 51); font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(231, 229, 220);"><ol start="1" style="padding: 0px; border: none; list-style: decimal; color: rgb(92, 92, 92); background-color: rgb(255, 255, 255);"><li style="padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="padding: 0px; border: none; color: black; background-color: inherit;"><span style="padding: 0px; border: none; color: black; background-color: inherit;">- (</span><span style="padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">void</span><span style="padding: 0px; border: none; color: black; background-color: inherit;">)showLoading {  </span></span></li><li style="padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="padding: 0px; border: none; color: black; background-color: inherit;">  </span></li><li style="padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="padding: 0px; border: none; color: black; background-color: inherit;">    [<span style="padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">self</span><span style="padding: 0px; border: none; color: black; background-color: inherit;">.loadingDispose</span><span style="padding: 0px; border: none; color: rgb(221, 0, 0); background-color: inherit;"> dispose</span><span style="padding: 0px; border: none; color: black; background-color: inherit;">];</span><span style="padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">//上次信号还没处理，取消它(距离上次生成还不到1秒)</span><span style="padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="padding: 0px; border: none; color: black; background-color: inherit;">    <span style="padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">@weakify</span><span style="padding: 0px; border: none; color: black; background-color: inherit;">(</span><span style="padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">self</span><span style="padding: 0px; border: none; color: black; background-color: inherit;">);  </span></span></li><li style="padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="padding: 0px; border: none; color: black; background-color: inherit;">    <span style="padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">self</span><span style="padding: 0px; border: none; color: black; background-color: inherit;">.loadingDispose</span><span style="padding: 0px; border: none; color: black; background-color: inherit;"> = [[[RACSignal</span><span style="padding: 0px; border: none; color: rgb(221, 0, 0); background-color: inherit;"> createSignal</span><span style="padding: 0px; border: none; color: black; background-color: inherit;">:^</span><span style="padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">RACDisposable</span><span style="padding: 0px; border: none; color: black; background-color: inherit;"> *(</span><span style="padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">id</span><span style="padding: 0px; border: none; color: black; background-color: inherit;">&lt;RACSubscriber&gt; subscriber) {  </span></span></li><li style="padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="padding: 0px; border: none; color: black; background-color: inherit;">        [subscriber<span style="padding: 0px; border: none; color: rgb(221, 0, 0); background-color: inherit;"> sendCompleted</span><span style="padding: 0px; border: none; color: black; background-color: inherit;">];  </span></span></li><li style="padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="padding: 0px; border: none; color: black; background-color: inherit;">        <span style="padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">return</span><span style="padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;"> nil</span><span style="padding: 0px; border: none; color: black; background-color: inherit;">;  </span></span></li><li style="padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="padding: 0px; border: none; color: black; background-color: inherit;">    }]<span style="padding: 0px; border: none; color: rgb(221, 0, 0); background-color: inherit;"> delay</span><span style="padding: 0px; border: none; color: black; background-color: inherit;">:</span><span style="padding: 0px; border: none; color: black; background-color: inherit;">1</span><span style="padding: 0px; border: none; color: black; background-color: inherit;">] </span><span style="padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">//延时一秒</span><span style="padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="padding: 0px; border: none; color: black; background-color: inherit;">   <span style="padding: 0px; border: none; color: rgb(221, 0, 0); background-color: inherit;"> subscribeCompleted</span><span style="padding: 0px; border: none; color: black; background-color: inherit;">:^{  </span></span></li><li style="padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="padding: 0px; border: none; color: black; background-color: inherit;">        <span style="padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">@strongify</span><span style="padding: 0px; border: none; color: black; background-color: inherit;">(</span><span style="padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">self</span><span style="padding: 0px; border: none; color: black; background-color: inherit;">);  </span></span></li><li style="padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="padding: 0px; border: none; color: black; background-color: inherit;">        doRequest();  </span></li><li style="padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="padding: 0px; border: none; color: black; background-color: inherit;">        <span style="padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">self</span><span style="padding: 0px; border: none; color: black; background-color: inherit;">.loadingDispose</span><span style="padding: 0px; border: none; color: black; background-color: inherit;"> =</span><span style="padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;"> nil</span><span style="padding: 0px; border: none; color: black; background-color: inherit;">;  </span></span></li><li style="padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="padding: 0px; border: none; color: black; background-color: inherit;">    }];  </span></li><li style="padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="padding: 0px; border: none; color: black; background-color: inherit;">}  </span></li></ol></div><div><span style="color: rgb(51, 51, 51); font-family: Arial; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; float: none; background-color: rgb(255, 255, 255);">上面代码看起来挻费解，不过下面一段类似的代码拆开写的，会比较容易理解：</span></div><div><span style="font-family: Menlo;"><span style="font-size: 14px;"><span style="color: silver;"><span style="font-family: Verdana, Geneva, Arial, Helvetica, sans-serif;"><span style="font-size: 9px;"><br/></span></span></span></span></span></div><div><div style="font-family: Consolas, &apos;Courier New&apos;, Courier, mono, serif; font-size: 12px; overflow: auto; padding-top: 1px; text-align: left; color: rgb(51, 51, 51); font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(231, 229, 220);"><ol start="1" style="padding: 0px; border: none; list-style: decimal; color: rgb(92, 92, 92); background-color: rgb(255, 255, 255);"><li style="padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="padding: 0px; border: none; color: black; background-color: inherit;"><span style="padding: 0px; border: none; color: black; background-color: inherit;">[</span><span style="padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">self</span><span style="padding: 0px; border: none; color: black; background-color: inherit;">.loadingDispose</span><span style="padding: 0px; border: none; color: rgb(221, 0, 0); background-color: inherit;"> dispose</span><span style="padding: 0px; border: none; color: black; background-color: inherit;">];  </span></span></li><li style="padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="padding: 0px; border: none; color: black; background-color: inherit;">      </span></li><li style="padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="padding: 0px; border: none; color: black; background-color: inherit;">    <span style="padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">RACSignal</span><span style="padding: 0px; border: none; color: black; background-color: inherit;"> *loggingSignal = [RACSignal</span><span style="padding: 0px; border: none; color: rgb(221, 0, 0); background-color: inherit;"> createSignal</span><span style="padding: 0px; border: none; color: black; background-color: inherit;">:^ </span><span style="padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">RACDisposable</span><span style="padding: 0px; border: none; color: black; background-color: inherit;"> * (</span><span style="padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">id</span><span style="padding: 0px; border: none; color: black; background-color: inherit;">&lt;RACSubscriber&gt; subscriber) {</span><span style="padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">//BLOCK_1</span><span style="padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="padding: 0px; border: none; color: black; background-color: inherit;">        subscriptions++;  </span></li><li style="padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="padding: 0px; border: none; color: black; background-color: inherit;">        [subscriber<span style="padding: 0px; border: none; color: rgb(221, 0, 0); background-color: inherit;"> sendNext</span><span style="padding: 0px; border: none; color: black; background-color: inherit;">:</span><span style="padding: 0px; border: none; color: blue; background-color: inherit;">@&quot;mytest&quot;</span><span style="padding: 0px; border: none; color: black; background-color: inherit;">];  </span></span></li><li style="padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="padding: 0px; border: none; color: black; background-color: inherit;">        [subscriber<span style="padding: 0px; border: none; color: rgb(221, 0, 0); background-color: inherit;"> sendCompleted</span><span style="padding: 0px; border: none; color: black; background-color: inherit;">];  </span></span></li><li style="padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="padding: 0px; border: none; color: black; background-color: inherit;">        <span style="padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">return</span><span style="padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;"> nil</span><span style="padding: 0px; border: none; color: black; background-color: inherit;">;  </span></span></li><li style="padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="padding: 0px; border: none; color: black; background-color: inherit;">    }];  </span></li><li style="padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="padding: 0px; border: none; color: black; background-color: inherit;">      </span></li><li style="padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="padding: 0px; border: none; color: black; background-color: inherit;">    loggingSignal = [loggingSignal<span style="padding: 0px; border: none; color: rgb(221, 0, 0); background-color: inherit;"> delay</span><span style="padding: 0px; border: none; color: black; background-color: inherit;">:</span><span style="padding: 0px; border: none; color: black; background-color: inherit;">1</span><span style="padding: 0px; border: none; color: black; background-color: inherit;">0</span><span style="padding: 0px; border: none; color: black; background-color: inherit;">];  </span></span></li><li style="padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="padding: 0px; border: none; color: black; background-color: inherit;">      </span></li><li style="padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="padding: 0px; border: none; color: black; background-color: inherit;">    <span style="padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">self</span><span style="padding: 0px; border: none; color: black; background-color: inherit;">.loadingDispose</span><span style="padding: 0px; border: none; color: black; background-color: inherit;"> = [loggingSignal</span><span style="padding: 0px; border: none; color: rgb(221, 0, 0); background-color: inherit;"> subscribeNext</span><span style="padding: 0px; border: none; color: black; background-color: inherit;">:^(NSString* x){</span><span style="padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">//BLOCK_2</span><span style="padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="padding: 0px; border: none; color: black; background-color: inherit;">        NSLog(<span style="padding: 0px; border: none; color: blue; background-color: inherit;">@&quot;%@&quot;</span><span style="padding: 0px; border: none; color: black; background-color: inherit;">,x);  </span></span></li><li style="padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="padding: 0px; border: none; color: black; background-color: inherit;">        NSLog(<span style="padding: 0px; border: none; color: blue; background-color: inherit;">@&quot;subscription %u&quot;</span><span style="padding: 0px; border: none; color: black; background-color: inherit;">, subscriptions);  </span></span></li><li style="padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="padding: 0px; border: none; color: black; background-color: inherit;">    }];  </span></li><li style="padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="padding: 0px; border: none; color: black; background-color: inherit;">      </span></li><li style="padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="padding: 0px; border: none; color: black; background-color: inherit;">    <span style="padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">self</span><span style="padding: 0px; border: none; color: black; background-color: inherit;">.loadingDispose</span><span style="padding: 0px; border: none; color: black; background-color: inherit;"> = [loggingSignal</span><span style="padding: 0px; border: none; color: rgb(221, 0, 0); background-color: inherit;"> subscribeCompleted</span><span style="padding: 0px; border: none; color: black; background-color: inherit;">:^{</span><span style="padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">//BLOCK_3</span><span style="padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="padding: 0px; border: none; color: black; background-color: inherit;">        NSLog(<span style="padding: 0px; border: none; color: blue; background-color: inherit;">@&quot;subscription %u&quot;</span><span style="padding: 0px; border: none; color: black; background-color: inherit;">, subscriptions);  </span></span></li><li style="padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="padding: 0px; border: none; color: black; background-color: inherit;">    }];  </span></li></ol></div><p style="color: rgb(51, 51, 51); font-family: Arial; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"></p><p style="color: rgb(51, 51, 51); font-family: Arial; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"></p></div><div><br/></div><div style="color: rgb(51, 51, 51); font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-family: Menlo; background-color: rgb(255, 255, 255);"><div>loggingSignal在每次被调用subscriibeNext:^(id x)或subscribeCompleted:^方法时(12行和17行)，它创建进传进的参数block_1就会被触动发，而block_1中的sendNext:方法会调用<span style="font-family: Menlo;">subscriibeNext:^中对应的block_2, 而block_1中的sendCompleted会调用subscribeCompleted:中对应的block_3</span></div></div></span>
</div></body></html>
