---
layout: post
title: Facebook开源动画框架 Pop体验（一）
description: ""
category: 客户端开发
tags: [FaceBook,Pop,Annimation]
keywords: FaceBook,Pop,Annimation
---

<html>
<head>
  <title>Facebook开源动画框架 Pop体验（一）</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/277494; Windows/6.1.7601 Service Pack 1 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="408"/>
<h1>Facebook开源动画框架 Pop体验（一）</h1>

<div>
<span>
<div>
<div style="padding: 0px; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, STheiti, 微软雅黑, 黑体, Arial, Tahoma, sans-serif, serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px;">acebook开源了期待已久的动画框架Pop，该框架为本文中的iOS app 提供了强大的动画支持。</div>
<div style="padding: 0px; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, STheiti, 微软雅黑, 黑体, Arial, Tahoma, sans-serif, serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px;"> </div>
<div style="padding: 0px; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, STheiti, 微软雅黑, 黑体, Arial, Tahoma, sans-serif, serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px;">Pop 中用来定义动画的方法类似于 苹果的Core Animation API。不论你以前是否使用过Core Animation，学习并使用Pop开发一个基本的动画都非常容易。</div>
<div style="padding: 0px; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, STheiti, 微软雅黑, 黑体, Arial, Tahoma, sans-serif, serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-align: center;"><img src="Facebook开源动画框架 Pop体验（一）_files/Image.gif" type="image/gif" alt="" style="border: 0px; max-width: 700px; text-align: center; cursor: pointer;" width="280"/></div>
<div style="padding: 0px; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, STheiti, 微软雅黑, 黑体, Arial, Tahoma, sans-serif, serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px;">这是一个简单动画，是借助弹簧效果把一个视图从一个点移动到另一点。</div>
<pre style="padding: 0px; font-family: 'Courier New', monospace; font-size: 12px; overflow: auto; background-color: rgb(247, 247, 247); color: rgb(51, 51, 51); font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-position: initial initial; background-repeat: initial initial;">
</pre>
<ol style="padding: 5px 0px; list-style: decimal; border-width: 0px 0px 0px 3px; border-left-style: solid; border-left-color: rgb(20, 107, 0); background-color: rgb(247, 247, 247); color: rgb(92, 92, 92); background-position: initial initial; background-repeat: initial initial;">
<li style="padding: 0px 3px 0px 10px !important; border: 0px; list-style: decimal-leading-zero outside; color: inherit;"><span style="padding: 0px; border: 0px; color: black; background-color: inherit;"><span style="padding: 0px; border: 0px; color: black; background-color: inherit;">POPSpringAnimation *springAnimation = [POPSpringAnimation animation]; </span></span></li>
<li style="padding: 0px 3px 0px 10px !important; border: 0px; list-style: decimal-leading-zero outside; color: rgb(92, 92, 92);"><span style="padding: 0px; border: 0px; color: black; background-color: inherit;">springAnimation.property = [POPAnimatableProperty propertyWithName:kPOPViewCenter]; </span></li>
<li style="padding: 0px 3px 0px 10px !important; border: 0px; list-style: decimal-leading-zero outside; color: inherit;"><span style="padding: 0px; border: 0px; color: black; background-color: inherit;">springAnimation.toValue = [NSValue valueWithCGPoint:CGPointMake(self.view.bounds.size.width/2, self.view.bounds.size.height/2)]; </span></li>
<li style="padding: 0px 3px 0px 10px !important; border: 0px; list-style: decimal-leading-zero outside; color: rgb(92, 92, 92);"><span style="padding: 0px; border: 0px; color: black; background-color: inherit;">springAnimation.velocity = [NSValue valueWithCGPoint:CGPointMake(100, 10)]; </span></li>
<li style="padding: 0px 3px 0px 10px !important; border: 0px; list-style: decimal-leading-zero outside; color: inherit;"><span style="padding: 0px; border: 0px; color: black; background-color: inherit;">[imageView pop_addAnimation:springAnimation forKey:@<span style="padding: 0px; border: 0px; color: blue; background-color: inherit;">&quot;center&quot;</span><span style="padding: 0px; border: 0px; color: black; background-color: inherit;">]; </span></span></li>
</ol>
<div style="padding: 0px; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, STheiti, 微软雅黑, 黑体, Arial, Tahoma, sans-serif, serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px;"> </div>
<div style="padding: 0px; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, STheiti, 微软雅黑, 黑体, Arial, Tahoma, sans-serif, serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px;">POPSpringAnimation 有几个属性是用来定义弹簧行为的，包括弹簧的反弹力度和速度。你可以这样改变其值：</div>
<pre style="padding: 0px; font-family: 'Courier New', monospace; font-size: 12px; overflow: auto; background-color: rgb(247, 247, 247); color: rgb(51, 51, 51); font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-position: initial initial; background-repeat: initial initial;">
</pre>
<ol style="padding: 5px 0px; list-style: decimal; border-width: 0px 0px 0px 3px; border-left-style: solid; border-left-color: rgb(20, 107, 0); background-color: rgb(247, 247, 247); color: rgb(92, 92, 92); background-position: initial initial; background-repeat: initial initial;">
<li style="padding: 0px 3px 0px 10px !important; border: 0px; list-style: decimal-leading-zero outside; color: inherit;"><span style="padding: 0px; border: 0px; color: black; background-color: inherit;"><span style="padding: 0px; border: 0px; color: black; background-color: inherit;">springAnimation.springBounciness = 20; </span></span></li>
<li style="padding: 0px 3px 0px 10px !important; border: 0px; list-style: decimal-leading-zero outside; color: rgb(92, 92, 92);"><span style="padding: 0px; border: 0px; color: black; background-color: inherit;">springAnimation.springSpeed = 20; </span></li>
</ol>
<div style="padding: 0px; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, STheiti, 微软雅黑, 黑体, Arial, Tahoma, sans-serif, serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px;">动画看起来像这样：</div>
<div style="padding: 0px; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, STheiti, 微软雅黑, 黑体, Arial, Tahoma, sans-serif, serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-align: center;"><img src="Facebook开源动画框架 Pop体验（一）_files/Image [1].gif" type="image/gif" alt="" style="border: 0px; max-width: 700px; text-align: center; cursor: pointer;" width="280"/></div>
<div style="padding: 0px; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, STheiti, 微软雅黑, 黑体, Arial, Tahoma, sans-serif, serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px;"> </div>
<div style="padding: 0px; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, STheiti, 微软雅黑, 黑体, Arial, Tahoma, sans-serif, serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px;">你想要展现动画效果的属性是由POPAnimatableProperty来表现的。该属性通常被用到视图或者图层上，但是Pop实际上可以让你对NSObject 对象上的任何属性执行动画效果（比方：约束）。借助propertyWithName: initalizer:方法可以使用一大堆便捷的常量来创建POPAnimatableProperty。</div>
<pre style="padding: 0px; font-family: 'Courier New', monospace; font-size: 12px; overflow: auto; background-color: rgb(247, 247, 247); color: rgb(51, 51, 51); font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-position: initial initial; background-repeat: initial initial;">
</pre>
<ol style="padding: 5px 0px; list-style: decimal; border-width: 0px 0px 0px 3px; border-left-style: solid; border-left-color: rgb(20, 107, 0); background-color: rgb(247, 247, 247); color: rgb(92, 92, 92); background-position: initial initial; background-repeat: initial initial;">
<li style="padding: 0px 3px 0px 10px !important; border: 0px; list-style: decimal-leading-zero outside; color: inherit;"><span style="padding: 0px; border: 0px; color: black; background-color: inherit;"><span style="padding: 0px; border: 0px; color: black; background-color: inherit;">kPOPViewAlpha; </span></span></li>
<li style="padding: 0px 3px 0px 10px !important; border: 0px; list-style: decimal-leading-zero outside; color: rgb(92, 92, 92);"><span style="padding: 0px; border: 0px; color: black; background-color: inherit;">kPOPViewBackgroundColor; </span></li>
<li style="padding: 0px 3px 0px 10px !important; border: 0px; list-style: decimal-leading-zero outside; color: inherit;"><span style="padding: 0px; border: 0px; color: black; background-color: inherit;">kPOPViewBounds; </span></li>
<li style="padding: 0px 3px 0px 10px !important; border: 0px; list-style: decimal-leading-zero outside; color: rgb(92, 92, 92);"><span style="padding: 0px; border: 0px; color: black; background-color: inherit;">kPOPViewCenter; </span></li>
<li style="padding: 0px 3px 0px 10px !important; border: 0px; list-style: decimal-leading-zero outside; color: inherit;"><span style="padding: 0px; border: 0px; color: black; background-color: inherit;">kPOPViewFrame; </span></li>
<li style="padding: 0px 3px 0px 10px !important; border: 0px; list-style: decimal-leading-zero outside; color: rgb(92, 92, 92);"><span style="padding: 0px; border: 0px; color: black; background-color: inherit;">kPOPViewScaleX; </span></li>
<li style="padding: 0px 3px 0px 10px !important; border: 0px; list-style: decimal-leading-zero outside; color: inherit;"><span style="padding: 0px; border: 0px; color: black; background-color: inherit;">kPOPViewScaleXY; </span></li>
<li style="padding: 0px 3px 0px 10px !important; border: 0px; list-style: decimal-leading-zero outside; color: rgb(92, 92, 92);"><span style="padding: 0px; border: 0px; color: black; background-color: inherit;">kPOPViewScaleY; </span></li>
<li style="padding: 0px 3px 0px 10px !important; border: 0px; list-style: decimal-leading-zero outside; color: inherit;"><span style="padding: 0px; border: 0px; color: black; background-color: inherit;">kPOPViewSize; </span></li>
</ol>
<div style="padding: 0px; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, STheiti, 微软雅黑, 黑体, Arial, Tahoma, sans-serif, serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px;">你可以在开始、结尾处以及其他地方通过实现POPAnimationDelegate 协议来回调函数，并且分配你的类对象作为POPAnimation的代理。</div>
<pre style="padding: 0px; font-family: 'Courier New', monospace; font-size: 12px; overflow: auto; background-color: rgb(247, 247, 247); color: rgb(51, 51, 51); font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-position: initial initial; background-repeat: initial initial;">
</pre>
<ol style="padding: 5px 0px; list-style: decimal; border-width: 0px 0px 0px 3px; border-left-style: solid; border-left-color: rgb(20, 107, 0); background-color: rgb(247, 247, 247); color: rgb(92, 92, 92); background-position: initial initial; background-repeat: initial initial;">
<li style="padding: 0px 3px 0px 10px !important; border: 0px; list-style: decimal-leading-zero outside; color: inherit;"><span style="padding: 0px; border: 0px; color: black; background-color: inherit;"><span style="padding: 0px; border: 0px; color: black; background-color: inherit;">- (</span><span style="padding: 0px; border: 0px; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">void</span><span style="padding: 0px; border: 0px; color: black; background-color: inherit;">)pop_animationDidStart:(POPAnimation *)anim; </span></span></li>
<li style="padding: 0px 3px 0px 10px !important; border: 0px; list-style: decimal-leading-zero outside; color: rgb(92, 92, 92);"><span style="padding: 0px; border: 0px; color: black; background-color: inherit;">- (<span style="padding: 0px; border: 0px; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">void</span><span style="padding: 0px; border: 0px; color: black; background-color: inherit;">)pop_animationDidReachToValue:(POPAnimation *)anim; </span></span></li>
<li style="padding: 0px 3px 0px 10px !important; border: 0px; list-style: decimal-leading-zero outside; color: inherit;"><span style="padding: 0px; border: 0px; color: black; background-color: inherit;">- (<span style="padding: 0px; border: 0px; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">void</span><span style="padding: 0px; border: 0px; color: black; background-color: inherit;">)pop_animationDidStop:(POPAnimation *)anim finished:(BOOL)finished; </span></span></li>
</ol>
<div style="padding: 0px; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, STheiti, 微软雅黑, 黑体, Arial, Tahoma, sans-serif, serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px;">如果你已经使用了顶级UIView block animation API，你需要花费一些时间习惯Pop,尤其是寻找UIView 的等效属性。我发现POPSpringAnimation 没有一个持续时间的属性，相反（我假设的）它的时间是由速率和弹动属性控制的。并且如果你搜寻延迟的等效属性，会发现是beginTime（作为Core Animation API的镜像）。</div>
<div style="padding: 0px; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, STheiti, 微软雅黑, 黑体, Arial, Tahoma, sans-serif, serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px;"> </div>
<div style="padding: 0px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px;">
<div><span style="color: rgb(51, 51, 51);"><span style="font-family: 'Helvetica Neue', Helvetica, STheiti, 微软雅黑, 黑体, Arial, Tahoma, sans-serif, serif;">Pop仍然有很多地方有待研究，我特别向往用它将任何对象的任何属性执行动画效果。我未来会努力从这个角度研究它。</span></span></div>
<div><span style="color: rgb(51, 51, 51);"><span style="font-family: 'Helvetica Neue', Helvetica, STheiti, 微软雅黑, 黑体, Arial, Tahoma, sans-serif, serif;"><br/></span></span></div>
<div><span style="color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, STheiti, 微软雅黑, 黑体, Arial, Tahoma, sans-serif, serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); float: none;">原文：</span><span style="font-family: 'Helvetica Neue', Helvetica, STheiti, 微软雅黑, 黑体, Arial, Tahoma, sans-serif, serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(255, 0, 0);"><a href="http://iosdevtips.co/post/84160910513/exploring-facebook-pop" style="font-style: normal; font-variant: normal; font-weight: normal; font-size: 12px; font-family: 'Helvetica Neue', Helvetica, STheiti, 微软雅黑, 黑体, Arial, Tahoma, sans-serif, serif; text-decoration: none; color: rgb(102, 102, 102);" target="_blank">Experimenting with Facebook’s open</a></span><span style="font-family: 'Helvetica Neue', Helvetica, STheiti, 微软雅黑, 黑体, Arial, Tahoma, sans-serif, serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(255, 0, 0);"><a href="http://iosdevtips.co/post/84160910513/exploring-facebook-pop" style="font-style: normal; font-variant: normal; font-weight: normal; font-size: 12px; font-family: 'Helvetica Neue', Helvetica, STheiti, 微软雅黑, 黑体, Arial, Tahoma, sans-serif, serif; text-decoration: none; color: rgb(102, 102, 102);" target="_blank"> source animation framework POP</a></span></div>
</div>
</div>
</span>
</div></body></html>

